from commands.earnings.garden.db import *
from commands.db import register_users, getname, getonlibalance, getidname
from commands.main import geturl
from commands.main import win_luser


async def potions_list(message):
    id = message.from_user.id
    name = await getname(message)
    url = await geturl(id, name)
    await register_users(message)
    await message.answer(f'''{url}, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–µ–ª—å—è:
üç∏ 1. –ß–∞–π: 40 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 1 —ç–Ω–µ—Ä–≥–∏—è

üç∏ 2. –ß–µ—Ñ–∏—Ä: 240 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 5 —ç–Ω–µ—Ä–≥–∏–∏

üç∏ 3. –ö–æ—Ñ–µ: 520 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 10 —ç–Ω–µ—Ä–≥–∏–∏

üç∏ 4. –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫: 1.120 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 20 —ç–Ω–µ—Ä–≥–∏–∏

üç∏ 5. –ö—Ä–µ–ø–∫–∏–π –∫–æ—Ñ–µ: 2.400 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 40 —ç–Ω–µ—Ä–≥–∏–∏

üç∏ 6. –ù–∞—Å—Ç–æ–π–∫–∞ –∏–∑ –≤–∏—à–Ω–∏: 3.000 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 50 —ç–Ω–µ—Ä–≥–∏–∏

üç∏ 7. –°—ã–≤–æ—Ä–æ—Ç–∫–∞ –∏–∑ –ø–ª–∞–∑–º—ã: 30.000 –∑—ë—Ä–µ–Ω
–ü—Ä–∏–±—ã–ª—å: 400 —ç–Ω–µ—Ä–≥–∏–∏

üõí –î–ª—è –ø–æ–∫—É–ø–∫–∏ –∑–µ–ª—å—è –≤–≤–µ–¥–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∑–µ–ª—å–µ [–Ω–æ–º–µ—Ä]"
‚õî –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –∑–µ–ª—å—è —ç–Ω–µ—Ä–≥–∏—è –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É.''', parse_mode='html')


async def bay_potions(message):
    id = message.from_user.id
    name = await getname(message)
    url = await geturl(id, name)
    await register_users(message)
    result = await win_luser()
    rwin, rloser = result
    corn = await getcorn(id)
    try:
        n = int(message.text.split()[2])
    except:
        await message.answer(f'{url}, –≤—ã –Ω–µ –≤–≤–µ–ª–∏ –Ω–æ–º–µ—Ä –∑–µ–ª—å—è –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å {rloser}', parse_mode='html')
        return

    if n == 1:
        name = '–ß–∞–π'
        summ = 1
        st = 40
    elif n == 2:
        name = '–ß–µ—Ñ–∏—Ä'
        summ = 5
        st = 240
    elif n == 3:
        name = '–ö–æ—Ñ–µ'
        summ = 10
        st = 520
    elif n == 4:
        name = '–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫'
        summ = 20
        st = 1120
    elif n == 5:
        name = '–ö—Ä–µ–ø–∫–∏–π –∫–æ—Ñ–µ'
        summ = 40
        st = 2400
    elif n == 6:
        name = '–ù–∞—Å—Ç–æ–π–∫–∞ –∏–∑ –≤–∏—à–Ω–∏'
        summ = 50
        st = 3000
    elif n == 7:
        name = '–°—ã–≤–æ—Ä–æ—Ç–∫–∞ –∏–∑ –ø–ª–∞–∑–º—ã'
        summ = 400
        st = 30000
    else:
        await message.answer(f'{url}, –≤—ã –≤–≤–µ–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –∑–µ–ª—å—è –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å {rloser}', parse_mode='html')
        return

    if corn < st:
        await message.answer(f'{url}, —É –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑—ë—Ä–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –∑–µ–ª—å—è {rloser}', parse_mode='html')
        return

    await message.answer(f'{url}, Wizzi_, –≤—ã —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–ª–∏ "{name}", –≤–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω–æ {summ} —ç–Ω–µ—Ä–≥–∏–∏ {rloser}', parse_mode='html')
    await buy_postion_db(summ, st, id)
